#This code will be used to help with a multi motor control test
#PWM ramping up with computer control via console input
import RPi.GPIO as GPIO
import time

GPIO.setwarnings(False)
GPIO.setmode(GPIO.BOARD)

GPIO.setup(37, GPIO.OUT)
GPIO.setup(16, GPIO.OUT)
GPIO.setup(22, GPIO.OUT)
GPIO.setup(11, GPIO.OUT)

freq37 = 590	#motor 1, pin 37 
freq16 = 590	#motor 2, pin 16
freq22 = 590	#motor 3, pin 22
freq23 = 590	#motor 4, pin 23
	
pwm37 = GPIO.PWM(37, freq37)          #sets f to 590 Hz, pin 37
pwm16 = GPIO.PWM(16, freq16)          #sets f to 590 Hz, pin 16
pwm22 = GPIO.PWM(22, freq22)          #sets f to 590 Hz, pin 22
pwm11 = GPIO.PWM(11, freq23)          #sets f to 590 Hz, pin 23

dc = 54                          #duty cycle initial value (all motors share this duty cycle)
pwm37.start(dc)
pwm16.start(dc)
pwm22.start(dc)
pwm11.start(dc)

while 1:

        a = int(input())
        print(a)
        if a ==  10:	#initial motor speed set: on
                dc = 55
                pwm37.ChangeDutyCycle(dc)
		pwm16.ChangeDutyCycle(dc)
		pwm22.ChangeDutyCycle(dc)
		pwm11.ChangeDutyCycle(dc)
                print('duty cycle increased by 1%')
                print('Current duty cycle is ')
                print(dc)
		
	if a == 100:
                freq37 = freq37 - 2
                pwm37.ChangeFrequency(freq37)
                print(freq37)	
                freq16 = freq16 - 2
                pwm16.ChangeFrequency(freq16)
                print(freq16)
		freq22 = freq22 - 2
                pwm22.ChangeFrequency(freq22)
                print(freq22)
		freq23 = freq23 - 2
                pwm11.ChangeFrequency(freq23)
                print(freq23)

	if a == 0:
                freq37 = freq37 + 2
                pwm37.ChangeFrequency(freq37)
                print(freq37)	
                freq16 = freq16 + 2
                pwm16.ChangeFrequency(freq16)
                print(freq16)
		freq22 = freq22 + 2
                pwm22.ChangeFrequency(freq22)
                print(freq22)
		freq23 = freq23 + 2
                pwm11.ChangeFrequency(freq23)
                print(freq23)
		
#motor 1 pin 37

	if a == 1:
                freq37 = freq37 - 1
                pwm37.ChangeFrequency(freq37)
                print(freq37)	

        if a == 2:
                freq37 = freq37 + 1
                pwm37.ChangeFrequency(freq37)
                print(freq37)


 #motor 2 pin 16

        if a == 3:
                freq16 = freq16 + 1
                pwm16.ChangeFrequency(freq16)
                print(freq16)

        if a == 4:
                freq16 = freq16 - 1
                pwm16.ChangeFrequency(freq16)
                print(freq16)


#motor 3 pin 22

        if a == 5:
                freq22 = freq22 + 1
                pwm22.ChangeFrequency(freq22)
                print(freq22)

        if a == 6:
                freq22 = freq22 - 1
                pwm22.ChangeFrequency(freq22)
                print(freq22)


#motor 4 pin 23

        if a == 7:
                freq23 = freq23 + 1
                pwm11.ChangeFrequency(freq23)
                print(freq23)

        if a == 8:
                freq23 = freq23 - 1
                pwm11.ChangeFrequency(freq23)
                print(freq23)


GPIO.cleanup()
